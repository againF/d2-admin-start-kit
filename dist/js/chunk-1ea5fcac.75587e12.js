(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ea5fcac","chunk-09460c7a","chunk-296fb1b2"],{"01ad":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("div",{staticClass:"left"},[t.showBackArrow?a("i",{staticClass:"el-icon-back",on:{click:t.goBack}}):t._e(),a("div",{staticClass:"text"},[t._v(t._s(t.headText))])]),t.showRightBtn?a("div",{staticClass:"right",on:{click:t.clickBtn}},[t._v(" "+t._s(t.headBtnText)+" ")]):t._e()])},s=[],i={props:{headText:{type:String,default:"xxx"},headBtnText:{type:String,default:"xxx"},showBackArrow:{type:Boolean,default:!0},showRightBtn:{type:Boolean,default:!0}},data:function(){return{}},computed:{positionData:function(){return this.$store.state.positionData}},mounted:function(){},methods:{goBack:function(){this.$router.go(-1)},clickBtn:function(){this.$emit("clickHeadBtn")}}},l=i,r=(a("d829"),a("cba8")),o=Object(r["a"])(l,n,s,!1,null,"63590e16",null);e["default"]=o.exports},"24ec":function(t,e,a){t.exports=a.p+"img/noData.eff6db67.png"},"4df0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"no-data-wrap"},[n("img",{staticClass:"no-data-img",attrs:{src:a("24ec"),alt:"noData"}}),n("div",{staticClass:"h1-text"},[t._v(t._s(t.title))]),n("div",{staticClass:"h2-text"},[t._v(t._s(t.des))])])},s=[],i={props:{title:{type:String,default:"暂无内容"},des:{type:String,default:""}}},l=i,r=(a("5a44"),a("cba8")),o=Object(r["a"])(l,n,s,!1,null,"07261f3c",null);e["default"]=o.exports},"5a44":function(t,e,a){"use strict";a("fa17")},"6c20":function(t,e,a){"use strict";a("eb57")},"79e9":function(t,e,a){},"7f98":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-height"},[a("page-header",{attrs:{"show-back-arrow":!1,"head-text":"网站","head-btn-text":"创建网站"},on:{clickHeadBtn:t.handleClickHeadBtn}}),a("div",{staticClass:"page-content"},[t.noWebsite?[a("no-data",{attrs:{des:"还没有创建任何网站立刻开始吧"}})]:[a("div",{staticClass:"padding-wrap"},[a("div",{staticClass:"bar-wrap"},[a("div",{staticClass:"bar-item"},[a("span",{staticClass:"key"},[t._v("创建网站数量")]),a("span",{staticClass:"value"},[t._v(t._s(t.totalNum))])]),a("div",{staticClass:"bar-item"},[a("span",{staticClass:"key"},[t._v("成功交付新站")]),a("span",{staticClass:"value"},[t._v(t._s(t.newNum))])]),a("div",{staticClass:"bar-item"},[a("span",{staticClass:"key"},[t._v("成功续费网站")]),a("span",{staticClass:"value"},[t._v(t._s(t.renewNum))])])]),a("div",{staticClass:"table-wrap"},[a("div",{staticClass:"search-wrap"},[a("el-select",{staticClass:"mr76",attrs:{placeholder:"请选择"},on:{change:t.changeStatus},model:{value:t.webStatus,callback:function(e){t.webStatus=e},expression:"webStatus"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"table-detail"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"500","max-height":"500","highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"name",label:"网站名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.name,placement:"top"}},[a("div",{staticClass:"one-line"},[t._v(t._s(e.row.name))])])]}}])}),a("el-table-column",{attrs:{property:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("span",{staticClass:"black-status"},[t._v("开发中")]):t._e(),2===e.row.status?a("span",{staticClass:"yellow-status"},[t._v("待接收")]):t._e(),3===e.row.status?a("span",{staticClass:"black-status"},[t._v("试用期")]):t._e(),4===e.row.status?a("span",{staticClass:"gray-status"},[t._v("已付款待定期")]):t._e(),5===e.row.status?a("span",{staticClass:"green-status"},[t._v("已成功")]):t._e(),6===e.row.status?a("span",{staticClass:"origin-status"},[t._v("即将到期")]):t._e(),7===e.row.status?a("span",{staticClass:"origin-status"},[t._v("已到期（保留期）")]):t._e(),8===e.row.status?a("span",{staticClass:"blue-status"},[t._v("已续约待定期")]):t._e(),9===e.row.status?a("span",{staticClass:"gray-status"},[t._v("已流失")]):t._e(),10===e.row.status?a("span",{staticClass:"gray-status"},[t._v("已退款")]):t._e()]}}])}),a("el-table-column",{attrs:{property:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.showDeliver(e.row)}}},[t._v("交付")]):t._e(),2===e.row.status?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.showCancelDeliver(e.row)}}},[t._v("取消交付")]):t._e()]}}])})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"scorll",staticStyle:{width:"100%"},attrs:{data:t.detailTableData,height:"500","max-height":"500","cell-style":t.cellStyle}},[a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-timeline",t._l(t.activities,(function(e,n){return a("el-timeline-item",{key:n,staticClass:"customer-timeline-item",attrs:{timestamp:e.time_str}},[t._v(" "+t._s(e.msg)+" ")])})),1)]}}])})],1)],1)]),a("pagination",{ref:"page",attrs:{getPageInfo:t.pageInfo},on:{getData:t.getData}})],1)]],2),a("el-dialog",{attrs:{title:"请输入交付人手机号","close-on-click-modal":!1,visible:t.isShowDeliver,width:"30%"},on:{"update:visible":function(e){t.isShowDeliver=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowDeliver=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"取消交付",visible:t.isShowCancelDeliver,width:"30%"},on:{"update:visible":function(e){t.isShowCancelDeliver=e}}},[a("span",[t._v("取消交付后该用户无法接收网站")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowCancelDeliver=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:t.cancelDeliver}},[t._v("取消交付")])],1)])],1)},s=[],i=a("f62e"),l=(a("bb4d"),a("94c2"),a("1576"),a("62ab")),r=a("01ad"),o=a("4df0"),c=a("dcf7"),u={name:"website",components:{pageHeader:r["default"],noData:o["default"],pagination:c["a"]},data:function(){var t=function(t,e,a){var n=/^((13|14|15|16|17|18|19)[0-9]{1}\d{8})$/;if(!n.test(e))return a(new Error("请输入正确的手机号"));a()};return{loading:!1,pageInfo:{pageSize:10,currentPage:1,total:0},noWebsite:!0,webStatus:"",statusOptions:[{value:1,label:"开发中"},{value:2,label:"待接收"},{value:3,label:"试用期"},{value:4,label:"已付款待定期"},{value:5,label:"已成功"},{value:6,label:"即将到期"},{value:7,label:"已到期(保留期)"},{value:8,label:"已续约待定期"},{value:9,label:"已流失"},{value:10,label:"已退款"}],detailTableData:[{}],activities:[],cellStyle:{background:"#F4F7FC"},tableData:[],isShowDeliver:!1,isShowCancelDeliver:!1,ruleForm:{phone:""},rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},totalNum:"",newNum:"",renewNum:"",currentOperateId:""}},created:function(){this.initPage()},mounted:function(){},watch:{$route:"initPage"},methods:{initPage:function(){var t=this;this.getSiteInfo().then((function(){t.initTableData()})).catch((function(t){console.log("error",t)}))},initTableData:function(){var t=this;this.getData().then((function(){console.log("then"),t.$refs.singleTable.setCurrentRow(t.tableData[0])}))},getData:function(){var t=this;return new Promise((function(e,a){var n={search:{status:t.webStatus}},s=Object(l["b"])(t.pageInfo,"id","desc",n);Object(l["a"])({url:"/site/list",method:"post",params:s},(function(a){var n=Object(l["c"])(a),s=Object(i["a"])(n,3);t.loading=s[0],t.tableData=s[1],t.pageInfo=s[2],e()}))}))},handleClickHeadBtn:function(){this.$router.push({name:"createWebsite"})},getSiteInfo:function(){var t=this;return new Promise((function(e,a){Object(l["a"])({url:"/site/info",method:"post"},(function(n){t.totalNum=n.data.total_num,t.totalNum>0?(t.noWebsite=!1,e()):(t.noWebsite=!0,a()),t.newNum=n.data.new_num,t.renewNum=n.data.renew_num}))}))},changeStatus:function(t){console.log("val",t)},handleCurrentChange:function(t){t&&t.list?this.activities=t.list:this.activities=[]},showDeliver:function(t){this.currentOperateId=t.id,this.isShowDeliver=!0},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(l["a"])({url:"/site/edit",method:"post",params:{id:e.currentOperateId,mobile:e.ruleForm.phone}},(function(t){e.$message.success("已向该用户发送信息，等待TA的接收"),e.initPage(),e.isShowDeliver=!1}))}))},showCancelDeliver:function(t){this.currentOperateId=t.id,this.isShowCancelDeliver=!0},cancelDeliver:function(){var t=this;Object(l["a"])({url:"/site/edit",method:"post",params:{id:this.currentOperateId}},(function(e){t.$message.success("操作成功"),t.initPage(),t.isShowCancelDeliver=!1}))}}},d=u,f=(a("ad3d"),a("6c20"),a("cba8")),p=Object(f["a"])(d,n,s,!1,null,"26d48856",null);e["default"]=p.exports},ad3d:function(t,e,a){"use strict";a("79e9")},c588d:function(t,e,a){},d829:function(t,e,a){"use strict";a("c588d")},dcf7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-pagination",{attrs:{background:"",layout:"prev,pager,sizes,next,total","page-size":t.pageInfo.pageSize,"current-page":t.pageInfo.currentPage,total:t.pageInfo.total},on:{"current-change":t.handleCurrentChange,"size-change":t.sizeChange}})},s=[],i={data:function(){return{pageInfo:{pageSize:10,currentPage:1,total:0}}},computed:{},props:{getSearchParams:{},getPageInfo:{}},watch:{getPageInfo:{handler:function(t){this.pageInfo=t},immediate:!0}},methods:{handleCurrentChange:function(t){this.pageInfo.currentPage=t,this.$emit("getData")},sizeChange:function(t){this.pageInfo.currentPage=1,this.pageInfo.pageSize=t,this.$emit("getData")}}},l=i,r=a("cba8"),o=Object(r["a"])(l,n,s,!1,null,null,null);e["a"]=o.exports},eb57:function(t,e,a){},f62e:function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return r}));a("affe"),a("9460"),a("1576"),a("72ae"),a("f56c"),a("a64e");function s(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,s,i=[],l=!0,r=!1;try{for(a=a.call(t);!(l=(n=a.next()).done);l=!0)if(i.push(n.value),e&&i.length===e)break}catch(o){r=!0,s=o}finally{try{l||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}}var i=a("91c9");function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){return n(t)||s(t,e)||Object(i["a"])(t,e)||l()}},fa17:function(t,e,a){}}]);